function applyLang(selectedLang){document.querySelectorAll('.cp_link').forEach(link=>{const newHref=link.getAttribute(`data-${selectedLang}`);const newText=link.getAttribute(`data-text-${selectedLang}`);if(newHref)link.setAttribute('href',newHref);if(newText)link.textContent=newText;});document.querySelectorAll('[data-text-tw], [data-text-jp]').forEach(elem=>{const newText=elem.getAttribute(`data-text-${selectedLang}`);if(newText)elem.textContent=newText;});}
function initLangSelector(onChangeCallback){document.querySelectorAll('input[name="lang"]').forEach(radio=>{radio.addEventListener('change',()=>{const selectedLang=document.querySelector('input[name="lang"]:checked').value;applyLang(selectedLang);if(typeof onChangeCallback==='function'){onChangeCallback(selectedLang);}});});}
$(document).ready(function(){let savedLang=localStorage.getItem('lang');if(savedLang){$(`input[name="lang"][value="${savedLang}"]`).prop('checked',true);applyLang(savedLang);}
$('input[name="lang"]').on('change',function(){let lang=$(this).val();localStorage.setItem('lang',lang);$('#output').empty();});initLangSelector();});